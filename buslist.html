<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Search Results - BusApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#000000d3',
                        secondary: '#667eea'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">

    <!-- Results Header - All in one line -->
    <div class="bg-white shadow-sm border-b border-gray-200">
        <div class=" py-2">
            <div class="flex items-center gap-2">
                <!-- Back Button -->
                <button onclick="goBack()" class="p-2 rounded-full hover:bg-gray-100 transition-colors flex-shrink-0">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                
                <!-- Route Display -->
                <div class="flex-1 min-w-0">
                    <div id="route-display" class="text-medium font-semibold text-gray-800 truncate">Bhubaneswar - Cuttack</div>
                </div>
                
                <!-- Date Picker -->
                <input type="date" id="travel-date" class=" py-1.5 border border-gray-300 rounded-md text-xs bg-white flex-shrink-0 mr-3 w-24">
            </div>
        </div>
    </div>

    <!-- Filter Tabs -->
    <div class="bg-white border-b border-gray-200">
        <div class="flex">
            <button class="filter-tab flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:bg-gray-50 transition-colors active" data-filter="price">
                <span>‚Çπ</span>
                <span>Price</span>
            </button>
            <button class="filter-tab flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:bg-gray-50 transition-colors" data-filter="times">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12,6 12,12 16,14"></polyline>
                </svg>
                <span>Times</span>
            </button>
            <button class="filter-tab flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium text-gray-600 border-b-2 border-transparent hover:bg-gray-50 transition-colors" data-filter="bus-type">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M8 6v6M16 6v6M8 12h8M4 18h16M4 6h16v6H4z"></path>
                </svg>
                <span>Bus Type</span>
            </button>
        </div>
    </div>

    <!-- Bus List -->
    <div class="py-2">
        <div id="bus-list" class="space-y-2">
            <!-- Bus cards will be dynamically generated here -->
        </div>
    </div>

    <script>
        // Sample bus data
const busData = [
    {
        id: 1,
        company: "Hanif Royal",
        type: "AC / Sleeper",
        seats: 10,
        logo: "HR",
        logoColor: "bg-red-500",
        departure: "10:00 PM",
        arrival: "05:45 AM",
        duration: "8H 25M",
        price: 450
    },
    {
        id: 2,
        company: "Green Line",
        type: "Non-AC / Seater",
        seats: 25,
        logo: "GL",
        logoColor: "bg-green-500",
        departure: "11:30 PM",
        arrival: "06:15 AM",
        duration: "8H 35M",
        price: 350
    },
    {
        id: 3,
        company: "Royal Coach",
        type: "AC / Semi Sleeper",
        seats: 12,
        logo: "RC",
        logoColor: "bg-purple-500",
        departure: "09:15 PM",
        arrival: "07:00 AM",
        duration: "8H 45M",
        price: 650
    }
];

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadRouteInfo();
    setDefaultDate();
    renderBusCards();
    setupEventListeners();
});

// Load route information from localStorage
function loadRouteInfo() {
    const searchData = localStorage.getItem('busSearchData');
    let fromCity = 'Bhubaneswar';
    let toCity = 'Cuttack';
    
    if (searchData) {
        const data = JSON.parse(searchData);
        fromCity = data.from || 'Bhubaneswar';
        toCity = data.to || 'Cuttack';
    }
    
    localStorage.setItem('fromCity', fromCity);
    localStorage.setItem('toCity', toCity);
    
    document.getElementById('route-display').textContent = `${fromCity} - ${toCity}`;
}

// Set default date to today
function setDefaultDate() {
    const today = new Date();
    const formattedDate = today.toISOString().split('T')[0];
    document.getElementById('travel-date').value = formattedDate;
}

// Render bus cards
function renderBusCards() {
    const busListContainer = document.getElementById('bus-list');
    const fromCity = localStorage.getItem('fromCity') || 'Bhubaneswar';
    const toCity = localStorage.getItem('toCity') || 'Cuttack';
    
    busListContainer.innerHTML = '';
    
    busData.forEach(bus => {
        const busCard = createBusCard(bus, fromCity, toCity);
        busListContainer.appendChild(busCard);
    });
}

// Create individual bus card
function createBusCard(bus, fromCity, toCity) {
    const card = document.createElement('div');
card.className = 'bg-white p-4 shadow-md border border-gray-200 hover:shadow-lg transition-shadow cursor-pointer';
card.onclick = () => viewSeats(bus.id);

    
    card.innerHTML = `
        <!-- Bus Header -->
        <div class="flex items-center justify-between mb-4 ">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 ${bus.logoColor} rounded-lg flex items-center justify-center text-white font-bold text-sm">
                    ${bus.logo}
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 text-base">${bus.company}</h3>
                    <p class="text-sm text-gray-600">${bus.type} ‚Ä¢ ${bus.seats} Seats</p>
                </div>
            </div>
            <div class="text-xl font-bold text-primary">‚Çπ${bus.price}</div>
        </div>
        
        <!-- Route Section (Horizontal) -->
        <div class="flex items-center justify-between mb-4 px-2">
            <div class="text-center">
                <div class="font-semibold text-gray-800 text-sm">${fromCity}</div>
                <div class="text-xs text-gray-600 mt-1">${bus.departure}</div>
            </div>
            
            <div class="flex-1 mx-4 relative">
             <div class="h-0.5 bg-gray-400 relative">
                 <div class="absolute inset-0 bg-gradient-to-r from-gray-300 via-transparent to-gray-300" 
                   style="background-image: repeating-linear-gradient(to right, #d1d5db 0, #d1d5db 4px, transparent 4px, transparent 8px);"></div>

                <!-- üöå Bus icon in center -->
                <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white px-1 text-sm z-10">
                 üöç
                </div>

             <div class="absolute -right-1 -top-1 w-0 h-0 border-l-4 border-l-gray-400 border-t-2 border-t-transparent border-b-2 border-b-transparent"></div>
            </div>

                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 bg-white px-2 text-xs text-gray-500">
                    ${bus.duration}
                </div>
            </div>
            
            <div class="text-center">
                <div class="font-semibold text-gray-800 text-sm">${toCity}</div>
                <div class="text-xs text-gray-600 mt-1">${bus.arrival}</div>
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex gap-3 justify-center">
            <button onclick="showReviews(${bus.id})" class="flex-1 py-2 px-3 border border-primary text-primary rounded-lg text-sm font-medium hover:bg-primary hover:text-white transition-colors">
                Reviews
            </button>
            <button onclick="showBookingPolicy(${bus.id})" class="flex-1 py-2 px-3 border border-primary text-primary rounded-lg text-sm font-medium hover:bg-primary hover:text-white transition-colors">
                Policy
            </button>
            <button onclick="event.stopPropagation(); viewSeats(${bus.id})" class="flex-1 py-2 px-3 border border-primary text-primary rounded-lg text-sm font-medium hover:bg-primary hover:text-white transition-colors">
            View Seats
            </button>    
        </div>
    `;
    
    return card;
}

// Setup event listeners
function setupEventListeners() {
    // Filter tabs
    const filterTabs = document.querySelectorAll('.filter-tab');
    filterTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            // Remove active class from all tabs
            filterTabs.forEach(t => {
                t.classList.remove('text-primary', 'border-primary');
                t.classList.add('text-gray-600', 'border-transparent');
            });
            // Add active class to clicked tab
            this.classList.remove('text-gray-600', 'border-transparent');
            this.classList.add('text-primary', 'border-primary');
            
            console.log('Filter selected:', this.dataset.filter);
        });
    });
    
    // Date and person count change listeners
    document.getElementById('travel-date').addEventListener('change', function() {
        console.log('Date changed:', this.value);
        localStorage.setItem('travelDate', this.value);
    });
    
    document.getElementById('person-count').addEventListener('change', function() {
        console.log('Person count changed:', this.value);
        localStorage.setItem('personCount', this.value);
    });
}

// Go back to previous page
function goBack() {
    window.history.back();
}

// Placeholder functions for bus actions
function showReviews(busId) {
    alert(`Reviews for bus ID: ${busId} - Feature coming soon!`);
}

function showBookingPolicy(busId) {
    alert(`Booking Policy for bus ID: ${busId} - Feature coming soon!`);
}

function viewSeats(busId) {
    // Find the bus data by ID
    const bus = busData.find(b => b.id === busId);
    
    if (!bus) {
        alert('Bus not found!');
        return;
    }
    
    // Create URL with parameters
    const params = new URLSearchParams({
        name: bus.company,
        time: bus.departure,
        type: bus.type,
        price: bus.price.toString()
    });
    
    // Navigate to seat selection page
    window.location.href = `seats.html?${params.toString()}`;
}

    </script>
</body>
</html>
